# 더미 데이터 요약

**작성일**: 2026-01-01  
**작성자**: 김택권  
**목적**: FastAPI 더미 데이터 생성 스크립트의 데이터 구조 및 사용법 정리

> **Google Sheets**: [Team01 신발가게 DB 더미데이터](https://docs.google.com/spreadsheets/d/1lHH27ASi5W97pGXQzAJxlA_5bR01DPw70unYg03rut0/edit?usp=sharing)
>
> **로컬 CSV 파일**: `DUMMY_DATA_FOR_SHEETS.csv` 파일을 참고하세요.

---

## 📊 데이터 생성 요약

### 1. branch (지점) - 5개
- 강남점, 홍대점, 잠실점, 부산점, 대구점
- 각 지점별 전화번호, 주소, 위도/경도 포함

### 2. maker (제조사) - 5개
- 나이키, 아디다스, 뉴발란스, 컨버스, 반스
- 각 제조사별 전화번호, 주소 포함

### 3. 카테고리
- **kind_category (종류)**: 5개 - 러닝화, 스니커즈, 부츠, 로퍼, 샌들
- **color_category (색상)**: 7개 - 블랙, 화이트, 그레이, 레드, 블루, 그린, 옐로우
- **size_category (사이즈)**: 8개 - 220, 230, 240, 250, 260, 270, 280, 290
- **gender_category (성별)**: 3개 - 남성, 여성, 공용

### 4. refund_reason_category (반품 사유 카테고리) - 8개
- 사이즈 불일치, 색상 불일치, 제품 불량, 단순 변심, 배송 지연, 제품 설명과 다름, 주문 실수, 교환 요청

### 5. user (고객) - 9개 (더미 데이터 기준)
- **일반 회원**: 5명
  - user001@example.com ~ user005@example.com
  - 최근 접속 (1-30일 전)
- **휴면 회원**: 2명
  - dormant001@example.com, dormant002@example.com
  - 6개월 이상 미접속 (200일 전)
- **탈퇴 회원**: 2명
  - quit001@example.com, quit002@example.com
  - 탈퇴일 설정됨
- **비밀번호**: 모든 사용자 `qwer1234`

**참고**: 실제 DB에는 더미 데이터 9명 외에 실제 사용자 계정이 추가로 있을 수 있습니다.

### 6. staff (직원) - 5명
- **점장 (최상급자)**: 3명
  - staff001 (김점장) - 강남점
  - staff003 (박점장) - 홍대점
  - staff005 (정점장) - 잠실점
- **하급자**: 2명
  - staff002 (이부점장) - 강남점 → 상급자: staff001
  - staff004 (최사원) - 홍대점 → 상급자: staff003
- **비밀번호**: 모든 직원 `pass1234`

### 7. product (제품) - 84개 (고정 생성)
- **제품명**: 4개
  - U740WN2 (뉴발란스)
  - 나이키 샥스 TL
  - 나이키 에어포스 1
  - 나이키 페가수스 플러스
- **색상**: 각 제품명당 3개 색상 (블랙, 그레이, 화이트)
- **사이즈**: 각 색상당 7개 사이즈 (220, 230, 240, 250, 260, 270, 280)
  - **참고**: 사이즈 카테고리는 8개(220~290)이지만, 제품 생성 시에는 7개(220~280)만 사용
- **총 개수**: 4개 제품명 × 3개 색상 × 7개 사이즈 = 84개
- **가격**: 사이즈별 고정 가격 (제품별로 다름, 예: 92,000원 ~ 222,000원)
- **재고**: 각 제품당 30개로 고정
- **이미지**: 제품별 고정 이미지 파일명 (예: `Newbalnce_U740WN2_Black_01.png`)
- **UNIQUE 제약**: `(cc_seq, sc_seq, m_seq, p_name)` 조합은 중복되지 않음
  - 동일한 색상, 사이즈, 제조사라도 제품명이 다르면 별도 제품으로 등록 가능

### 8. purchase_item (구매 내역)
- **주문 그룹**: 10개 (분 단위로 그룹화)
- **항목 수**: 각 주문당 1-3개 항목 (고정 시드 랜덤)
- **기간**: 최근 30일
- **시간대**: 9시 ~ 20시
- **상태**: '0' (준비중), '1' (준비완료), '2' (수령완료), '3' (반품완료), NULL (상태미정) - 고정 시드 랜덤
- **가격**: 50,000원 ~ 200,000원 (고정 시드 랜덤)
- **수량**: 1-3개 (고정 시드 랜덤)

### 9. pickup (수령) - 최대 15개
- **생성 방식**: 구매 내역의 일부에서 랜덤 선택 (고정 시드)
- **기간**: 주문일(b_date) 이후 1~7일 이내 (날짜 일관성 보장)
- **날짜 일관성**: pickup_date는 항상 b_date 이후로 설정됨

### 10. refund (반품) - 최대 5개
- **반품 사유**: refund_reason_category에서 랜덤 선택 (고정 시드)
- **생성 방식**: 수령(pickup) 중 일부에서 랜덤 선택 (고정 시드)
- **기간**: 픽업일(pickup_date) 이후 1~10일 이내 (날짜 일관성 보장)
- **날짜 일관성**: ref_date는 항상 pickup_date 이후로 설정됨

### 11. receive (입고) - 20개
- **수량**: 10-100개 (고정 시드 랜덤)
- **기간**: 최근 60일 이내

### 12. request (발주) - 15개
- **발주 내용**: 재고 부족으로 인한 발주 요청, 신제품 입고 요청, 인기 상품 추가 발주, 계절 상품 발주, 프로모션 상품 발주 (랜덤)
- **수량**: 20-200개 (랜덤)
- **기간**: 최근 30일 이내
- **결재 완료 비율**: 50% (req_manappdate 설정)
- **이사 결재 완료 비율**: 30% (req_dirappdate 설정)

### 13. chatting (채팅 세션) - 최대 5개
- **생성 방식**: 일부 사용자만 채팅 세션 생성 (랜덤 샘플링, 고정 시드)
- **담당 직원**: 50% 확률로 할당 (NULL 가능)
- **Firebase 문서 ID**: 더미용 임의 생성 (실제로는 Firebase에서 생성)
- **기간**: 최근 7일 내
- **종료 여부**: 30% 확률로 종료 상태 (is_closed = 1)

## 🔄 생성 순서

1. branch (지점)
2. maker (제조사)
3. 카테고리들 (kind, color, size, gender)
4. refund_reason_category (반품 사유 카테고리)
5. user (고객) + user_auth_identities (인증 정보)
6. staff (직원)
7. chatting (채팅 세션)
8. product (제품)
9. purchase_item (구매 내역)
10. pickup (수령)
11. refund (반품)
12. receive (입고)
13. request (발주)

## ⚠️ 주의사항

1. **중복 방지**: 모든 테이블에서 중복 데이터는 확인 후 기존 데이터를 사용하거나 업데이트
2. **외래 키**: 생성 순서에 따라 외래 키 의존성 고려
3. **랜덤 시드 고정**: `random.seed(42)`로 고정되어 있어 실행마다 동일한 데이터가 생성됨 (재현 가능)
4. **날짜 일관성**: 
   - pickup_date는 항상 b_date 이후로 설정됨
   - ref_date는 항상 pickup_date 이후로 설정됨
5. **제품 데이터**: 랜덤이 아닌 고정된 제품명, 색상, 사이즈 조합으로 생성됨
6. **구매 내역 상태**: b_status는 숫자 문자열 ('0', '1', '2', '3') 또는 NULL로 저장됨
7. **이미지**: 더미 이미지는 1x1 PNG 바이너리 데이터로 생성

## 📝 사용 방법

### Google Sheets 직접 접근
- **링크**: [Team01 신발가게 DB 더미데이터](https://docs.google.com/spreadsheets/d/1lHH27ASi5W97pGXQzAJxlA_5bR01DPw70unYg03rut0/edit?usp=sharing)

### CSV 파일 임포트
1. Google Sheets 열기
2. 파일 → 가져오기 → 파일 업로드
3. `DUMMY_DATA_FOR_SHEETS.csv` 선택
4. 구분 기호를 쉼표(,)로 설정

### 직접 붙여넣기
1. `DUMMY_DATA_FOR_SHEETS.csv` 파일 열기
2. 전체 복사 (Ctrl+A, Ctrl+C)
3. Google Sheets에서 붙여넣기 (Ctrl+V)
4. 데이터 → 텍스트를 열로 분할 (구분 기호: 쉼표)

---

## 📝 변경 이력

### 2026-01-01 (최신)
- **데이터 구조 업데이트**:
  - user: 8개 → 9개로 수정
  - size_category: 7개 → 8개 (220 추가)
  - refund_reason_category: 8개 추가
  - product: 30개 (랜덤) → 84개 (고정, 4개 제품명 × 3개 색상 × 7개 사이즈)
  - 제품명, 색상, 사이즈, 가격, 재고 정보 상세화
  - b_status: 한국어 → 숫자 문자열 ('0', '1', '2', '3', NULL)로 변경
  - 랜덤 시드 고정 (random.seed(42)) 추가
  - 날짜 일관성 보장 (pickup_date > b_date, ref_date > pickup_date) 명시
  - UNIQUE 제약조건: (cc_seq, sc_seq, m_seq) → (cc_seq, sc_seq, m_seq, p_name)로 변경

### 2026-01-01 김택권
- **최초 작성**: 더미 데이터 요약 문서 작성
- Google Sheets 링크 추가

### 2026-01-03 김택권
- **제품 생성 정보 보완**:
  - 사이즈 카테고리 8개(220~290) 중 제품 생성 시 7개(220~280)만 사용한다는 점 명시
  - UNIQUE 제약조건 설명 보완: 제품명이 다르면 별도 제품으로 등록 가능하다는 점 추가
- **DB 검수 결과 반영**:
  - product 테이블 UNIQUE 제약조건 확인: `(cc_seq, sc_seq, m_seq, p_name)` 정확히 반영됨
  - purchase_item.b_status 값 확인: 모든 값이 숫자 문자열로 저장됨
  - refund 테이블 구조 확인: 모든 필드 존재 확인
  - 사이즈 카테고리 확인: 8개 생성, 7개 사용 (290 미사용)
  - 제품 개수 확인: 84개 정확히 생성됨
  - 반품 사유 카테고리 확인: 8개 정확히 생성됨
  - 고객 개수: 더미 데이터 9명 기준, 실제 DB에는 추가 계정 있을 수 있음

### 2026-01-04 김택권
- **chatting 테이블 더미 데이터 추가**:
  - 채팅 세션 더미 데이터 생성 함수 추가 (`create_chattings`)
  - 일부 사용자만 채팅 세션 생성 (최대 5개)
  - 담당 직원은 50% 확률로 할당 (NULL 가능)
  - Firebase 문서 ID는 더미용 임의 생성
  - 채팅 종료 여부는 30% 확률로 종료 상태
  - 생성 순서: user와 staff 생성 후 chatting 생성

---

**문서 버전**: 2.3  
**최종 수정일**: 2026-01-04  
**최종 수정자**: 김택권

